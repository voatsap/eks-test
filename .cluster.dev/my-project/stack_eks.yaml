backend: aws-backend
cliVersion: '>= 0.7.14'
kind: Stack
name: cluster
template: https://github.com/shalb/cdev-aws-eks?ref=v0.3.0
variables:
  cluster_name: demo
  domain: cluster.dev
  eks_managed_node_groups:
    workers:
      capacity_type: SPOT
      desired_size: 2
      disk_size: 80
      force_update_version: true
      iam_role_additional_policies:
        ebspolicy: arn:aws:iam::aws:policy/service-role/AmazonEBSCSIDriverPolicy
      instance_types:
      - t3.xlarge
      - m5.xlarge
      - t3.medium
      labels: {}
      max_size: 5
      min_size: 2
      name: spot-workers
      subnet_ids: '{{ remoteState "cluster.vpc.private_subnets" }}'
      taints: []
      update_config:
        max_unavailable: 1
  eks_version: '1.26'
  environment: demo-env
  organization: shalb
  region: eu-central-1
